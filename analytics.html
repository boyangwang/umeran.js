<!DOCTYPE html>
<html ng-app="umeran">
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular.min.js"></script>
  </head>
  <body>
    <div ng-controller="umeranController">
      <p><label>Number of visits in past 24 hours: {{data.records.length}}</label><span></span></p>
      <p><label>Number of visits total: {{data.total}}</label><span></span></p>
      <div>
          <label>Sample document: </label>
          <pre ng-bind="data.records | sampleRecordsJsonPrettyPrint"></pre>
      </div>
    </div>
    <script>
        angular.module('umeran', [])
        .controller('umeranController', ['umeranJsonService', '$scope',
        function(umeranJsonService, $scope) {
            umeranJsonService().then(function(data) {
                $scope.data = data;
                $scope.data.prettyRecords = JSON.stringify(data.records, null, 2);
            });
        }]).factory("umeranJsonService", ['$http', function($http) {
            return function() {
                return $http.get("/analytics.json").then(function(response) { return response.data; });
            };
        }]).filter('sampleRecordsJsonPrettyPrint', function() {
            return function(records) { return JSON.stringify(records.slice(0, 5), null, 2); };
        });
    </script>
  </body>
</html>
